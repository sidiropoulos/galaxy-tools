<tool id="probing_coverage" version="0.1" name="Calculate coverage and TCR" force_history_refresh="True">
    <description>(Termination Coverage Ratio) on HRF-Seq data</description>
    <command interpreter="Rscript"> 
                rna_probing_coverage.R 

		## Inputs
		--sample '$input1' 
		
		##--control '$input2'
	
		## Plotting
		#if $pdf:
			--plots '$plots' 
		#end if

		## Options		
		#if str( $params.full) == "yes":

			-p $params.peak
			-b $params.ball
			-w $params.window
		#else 
			-p 100
			-b 4
			-w 1
		#end if 

		## Output
		-o '$output'  
    </command>

    <inputs>
        <param format="tabular" name="input1" type="data" label="Read Count file" help="Read counts output from Estimate Unique Counts tool." />
<!--	<param format="tabular" name="input2" type="data" label="Control sample Read Count Input" help="Read counts output from RNA-probing Count tool." />
-->
	<param name="pdf" type="boolean" truevalue="" falsevalue="" checked="true" label="Produce plots" help="Outputs a PDF file." />


	<conditional name="params"> 
	    <param name="full" type="select" label="Parameter Settings" help="You can use the default settings or set custom values suited to your experiment." >	
              <option value="no">Use defaults</option>
              <option value="yes">Full parameter list</option>
 	    </param>
	    <when value="yes">
		<param name="peak" type="integer" value="100" label="Size selection" help="Filter out the short inserts." />
		<param name="ball" type="float" value="4" label="Solvent radius" help="Used for ribose accessibility measurment. Must be precomputed!!!" />
		<param name="window" type="integer" value="1" label="Window size" help="Smoothening parameter. Effective size is (window_size * 2 + 1" />
	    </when>
	    <when value="no" />
	</conditional>
    </inputs>

    <outputs>
        <data format="tabular" name="output" label="${tool.name} on ${on_string}" />
        <data format="pdf" name="plots" label="${tool.name} on ${on_string}: Plots" >
	  <filter>pdf is True</filter>
	</data>
        </outputs>
<help>
</help>
</tool>
