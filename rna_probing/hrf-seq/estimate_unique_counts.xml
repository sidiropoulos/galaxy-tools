<tool id="hrf_euc" version="0.1" name="Estimate Unique Counts" force_history_refresh="True">
    <description></description>
    <requirements>
        <requirement type="package" version="0.1.18">samtools</requirement>
    </requirements>
    <command interpreter="bash">
	estimate_unique_counts.sh

	## Inputs
	-f $input1 -b $input2 
	
	##
	#if str( $priming.flag ) == 'False':
		-p -1
	#else
		-p $priming.position
	#end if
		
    </command>

    <inputs>
        <param format="bam" name="input1" type="data" label="Aligned Reads" help="BAM format." />
	<param format="tabular" name="input2" type="data" label="Barcodes" help="Produced by Debarcoding tool." />
	<conditional name="priming"> 
	    <param name="flag" type="boolean" checked="False" truevalue="True" falsevalue="False" label="Set priming position" help="Set all reads to have a specific priming position." />	
	    <when value="True">
	        <param name="position" type="integer" value="-1" label="Priming position" />
	    </when>
	</conditional>
    </inputs>

    <outputs>
        <data format="tabular" name="trimming_stats" label="${tool.name} on ${on_string}: Trimming stats" from_work_dir="output_dir/trimming_stats.txt" />
        <data format="tabular" name="summary" label="${tool.name} on ${on_string}: Summary" from_work_dir="output_dir/summary.txt" />
        <data format="tabular" name="unique_barcodes" label="${tool.name} on ${on_string}: Unique Barcodes" from_work_dir="output_dir/unique_barcodes.txt" />
        <data format="tabular" name="read_counts" label="${tool.name} on ${on_string}: Read Counts" from_work_dir="output_dir/read_counts.txt" />
    </outputs>
    
    <tests>
	<test>
	    <param name="input1" value="sample.bam" />
	    <param name="input2" value="barcodes.txt" />
	    <output name="trimming_stats" file="trimming_stats.txt" />
	    <output name="summary" file="summary.txt" />
	    <output name="unique_barcodes" file="unique_barcodes.txt" />
	    <output name="read_counts" file="read_counts.txt" />
	</test>
    </tests>

    <help>
    </help>
</tool>
